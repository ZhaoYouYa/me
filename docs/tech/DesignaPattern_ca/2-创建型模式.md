---
tags:
    - Design Pattern
---

::: info Introduction

:::

- 谁创建
- 什么时候创建
- 怎样创建

## Abstract Factory 抽象工厂模式

> 提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类。


```plantuml
allowmixing
component Client 
abstract AbstractFactory {
    + createProductA()
    + createProductB()
}
class ConcreteFactory1 {
    + createProductA()
    + createProductB()
}
class ConcreteFactory2 {
    + createProductA()
    + createProductB()
}
abstract AbstractProductA
abstract AbstractProductB
class ProductA1
class ProductA2
class ProductB1
class ProductB2

ProductA1 --|> AbstractProductA
ProductB1 --|> AbstractProductB
ProductA2 --|> AbstractProductA
ProductB2 --|> AbstractProductB
Client --> AbstractProductA
Client --> AbstractProductB

ConcreteFactory1 --|> AbstractFactory
ConcreteFactory2 --|> AbstractFactory
Client --> AbstractFactory

ConcreteFactory1 ..> ProductA1
ConcreteFactory1 ..> ProductB1

ConcreteFactory2 ..> ProductA2
ConcreteFactory2 ..> ProductB2
```

### 参与者

- AbstractFactory：声明一个创建抽象产品对象的操作接口
- ConcreteFactory: 实现创建具体产品对象的操作
- AbstractProduct: 为一类产品对象声明一个接口
- ConcreteProduct: 一个具体的产品对象
- Client: 仅使用 AbstractFactory 和 AbstractFactory 类声明的接口

如果有一系列需要创建的对象，它们之间有依赖和匹配关系，就可以使用抽象工厂模式。
也就是说 当 (A1，B1)、(A2,B2)搭配是正确的，而(A1,B2)搭配是错误的，你需要一个类来约束这种搭配关系，这个类就是一个工厂类。

## Builder 建造者模式

> 将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。

一个类十分复杂，它有根据组合不同有多种形态

```plantuml

class Director {
    + construct()
}
class Builder  {
    + buildPart()
}
class ConcreteBuilder {
    + buildPart()
}
class Product 

Director o-- Builder
ConcreteBuilder --|> Builder
ConcreteBuilder ..> Product

note top of Director:for all objects in structure { \n builder->buildPart() \n}

```

### 参与者

- Builder 
    - 为创建一个Product对象的各个部件指定抽象接口
- ConcreteBuilder
    - 实现Builder的接口以构造和装配该产品的各个部件
    - 定义并明确它所创建的表示
- Director
    - 构造一个使用Builder接口的对象
- Product
    - 表示被构造的复杂对象
    - 通常包含定义组成部件的类，包括将这些部件装配成最终产品的接口

各个参与者的协作：

```plantuml
aClient --> aDirector: new Director(aConcteteBuilder)
aClient -->aConcteteBuilder: new ConcreteBuilder

aClient --> aDirector: construct()
activate aDirector
aDirector -> aConcteteBuilder: buildPart1()
aDirector -> aConcteteBuilder: buildPart2()
aDirector -> aConcteteBuilder: buildPart3()
deactivate aDirector

aClient --> aConcteteBuilder: getResult()

```
## Factory Method 工厂方法模式